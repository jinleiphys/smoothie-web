<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ - SMOOTHIE</title>
    <meta name="description" content="Frequently Asked Questions about SMOOTHIE - Scattering Model of Optical Operator Theory for Ichimura-Austern-Vincent Equations">
    <meta name="keywords" content="SMOOTHIE FAQ, quantum scattering questions, nuclear physics help">
    <meta name="author" content="SMOOTHIE Development Team">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="FAQ - SMOOTHIE">
    <meta property="og:description" content="Get answers to frequently asked questions about SMOOTHIE quantum scattering model">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary">
    <meta property="twitter:title" content="FAQ - SMOOTHIE">
    <meta property="twitter:description" content="Get answers to frequently asked questions about SMOOTHIE quantum scattering model">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J60NE88WR1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-J60NE88WR1');
    </script>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <a href="#main-content" class="skip-navigation">Skip to main content</a>
    
    <div class="app-container">
        <button class="mobile-menu-toggle" aria-label="Toggle menu">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>
        
        <div class="sidebar-overlay"></div>
        
        <nav class="sidebar" role="navigation" aria-label="Main navigation">
            <div class="sidebar-header">
                <h1 class="logo">SMOOTHIE</h1>
                <div class="logo-subtitle">Scattering Model of Optical Operator Theory for Ichimura-Austern-Vincent Equations</div>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="story.html" class="nav-link">Birth of SMOOTHIE</a></li>
                <li><a href="papers.html" class="nav-link">Related Papers</a></li>
                <li><a href="formulas.html" class="nav-link">Theoretical Framework</a></li>
                <li><a href="downloads.html" class="nav-link">Downloads</a></li>
                <li><a href="examples.html" class="nav-link">Input Examples</a></li>
                <li><a href="programs.html" class="nav-link">Related Programs</a></li>
                <li><a href="generator.html" class="nav-link">Input File Generator</a></li>
                <li><a href="code.html" class="nav-link">Code & Installation</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
                <li><a href="faq.html" class="nav-link active">FAQ</a></li>
            </ul>
        </nav>

        <main class="main-content" id="main-content" role="main">
            <nav aria-label="Breadcrumb" class="breadcrumb">
                <ol>
                    <li><a href="index.html">Home</a></li>
                    <li>FAQ</li>
                </ol>
            </nav>
            
            <div class="page-header">
                <h1>Frequently Asked Questions</h1>
                <p>Get answers to common questions about SMOOTHIE. Can't find what you're looking for? Ask a new question below!</p>
            </div>

            <div class="faq-container">
                <div class="faq-actions">
                    <button class="btn-primary" onclick="showQuestionForm()">Ask a Question</button>
                    <button class="btn-secondary" onclick="loadFAQs()">Refresh FAQs</button>
                </div>

                <div class="question-form-container" id="questionForm" style="display: none;">
                    <div class="question-form">
                        <h3>Ask a New Question</h3>
                        <form id="faqForm" onsubmit="submitQuestion(event)">
                            <div class="form-group">
                                <label for="questionTitle">Question Title:</label>
                                <input type="text" id="questionTitle" name="title" required 
                                       placeholder="Brief summary of your question">
                            </div>
                            <div class="form-group">
                                <label for="questionBody">Question Details:</label>
                                <textarea id="questionBody" name="body" required rows="6"
                                         placeholder="Please provide detailed information about your question, including any error messages, input files, or specific scenarios you're encountering."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="questionEmail">Your Email (optional):</label>
                                <input type="email" id="questionEmail" name="email" 
                                       placeholder="your.email@example.com (for follow-up notifications)">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Submit Question</button>
                                <button type="button" class="btn-secondary" onclick="hideQuestionForm()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="loading-spinner" id="loadingSpinner" style="display: none;">
                    <div class="spinner"></div>
                    <p>Loading FAQs...</p>
                </div>

                <div class="faq-list" id="faqList">
                    <div class="faq-item">
                        <h3 class="faq-question">How do I install SMOOTHIE?</h3>
                        <div class="faq-answer">
                            <p>SMOOTHIE can be installed by downloading the source code from the <a href="downloads.html">Downloads</a> page and compiling it using a Modern Fortran compiler. Detailed installation instructions are available on the <a href="code.html">Code & Installation</a> page.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <h3 class="faq-question">What are the system requirements for running SMOOTHIE?</h3>
                        <div class="faq-answer">
                            <p>SMOOTHIE requires:</p>
                            <ul>
                                <li>A Modern Fortran compiler (gfortran, ifort, etc.)</li>
                                <li>Linux or Windows operating system</li>
                                <li>At least 4GB of RAM for typical calculations</li>
                                <li>Sufficient disk space for input/output files</li>
                            </ul>
                        </div>
                    </div>

                    <div class="faq-item">
                        <h3 class="faq-question">How do I create input files for SMOOTHIE?</h3>
                        <div class="faq-answer">
                            <p>You can create input files manually by following the format described in the documentation, or use our <a href="generator.html">Input File Generator</a> for a guided approach. Example input files are available on the <a href="examples.html">Input Examples</a> page.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <h3 class="faq-question">What should I cite when using SMOOTHIE in my research?</h3>
                        <div class="faq-answer">
                            <p>Please cite the relevant papers listed on our <a href="index.html#citation">home page</a>. The main references include the foundational work by Lei & Moro (2015), the theoretical framework by Lei (2018), and the R-matrix method by Lei & Descouvemont (2020).</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 15l-6-6-6 6"/>
        </svg>
    </button>

    <script src="script.js"></script>
    <script>
        const GITHUB_REPO = 'jinlei/smoothie-web';
        const FAQ_LABEL = 'faq';

        function showQuestionForm() {
            document.getElementById('questionForm').style.display = 'block';
            document.getElementById('questionTitle').focus();
        }

        function hideQuestionForm() {
            document.getElementById('questionForm').style.display = 'none';
            document.getElementById('faqForm').reset();
        }

        async function submitQuestion(event) {
            event.preventDefault();
            
            const title = document.getElementById('questionTitle').value;
            const body = document.getElementById('questionBody').value;
            const email = document.getElementById('questionEmail').value;
            
            let issueBody = body;
            if (email) {
                issueBody += `\n\n---\n**Contact:** ${email}`;
            }
            
            const githubUrl = `https://github.com/${GITHUB_REPO}/issues/new?` +
                `title=${encodeURIComponent(title)}&` +
                `body=${encodeURIComponent(issueBody)}&` +
                `labels=${FAQ_LABEL}`;
            
            window.open(githubUrl, '_blank');
            hideQuestionForm();
            
            alert('Thank you for your question! You will be redirected to GitHub to complete the submission. The question will appear in the FAQ once it has been answered.');
        }

        async function loadFAQs() {
            const spinner = document.getElementById('loadingSpinner');
            const faqList = document.getElementById('faqList');
            
            spinner.style.display = 'block';
            
            try {
                const response = await fetch(`https://api.github.com/repos/${GITHUB_REPO}/issues?labels=${FAQ_LABEL}&state=closed`);
                const issues = await response.json();
                
                if (issues.length > 0) {
                    const faqItems = issues.map(issue => {
                        const question = issue.title;
                        const answer = issue.comments > 0 ? 
                            'Click to view the detailed answer on GitHub.' : 
                            'This question is being reviewed.';
                        
                        return `
                            <div class="faq-item">
                                <h3 class="faq-question">${escapeHtml(question)}</h3>
                                <div class="faq-answer">
                                    <p>${escapeHtml(answer)}</p>
                                    <a href="${issue.html_url}" target="_blank" class="faq-link">View full discussion →</a>
                                </div>
                            </div>
                        `;
                    }).join('');
                    
                    faqList.innerHTML = faqItems;
                } else {
                    console.log('No FAQ issues found, keeping default content');
                }
            } catch (error) {
                console.error('Error loading FAQs:', error);
            } finally {
                spinner.style.display = 'none';
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        document.addEventListener('DOMContentLoaded', function() {
            const faqItems = document.querySelectorAll('.faq-item');
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                question.addEventListener('click', function() {
                    item.classList.toggle('active');
                });
            });
        });
    </script>
</body>
</html>